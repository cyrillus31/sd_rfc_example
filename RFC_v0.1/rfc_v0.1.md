# Социальная сеть
# Функциональные требования
## Users

- Регистрация и Аутентификация/Авторизация, восстановление пароля
- Создание профиля, редактирование. Просмотр своего профиля и профиля других
- Подписки, отписки на людей
- Сообщения (переписка): написание, редактирование
- Нотификации: сообщения, новые подписчики
## Content

- Посты: написание, редактирование, удаление, лайки/дизлайки, комментарии
- Работа с лентой: отображение, ранжирование
- Поиск по системе: посты, люди
- Аналитика для пользователя: активность в течение месяца, наиболее популярные посты, люди (с кем чаще общался, кого чаще просматривал) и т.д.

# Нефункциональные требования

##### DAU 
30 million
##### MAU
70 million

##### User interactions
Каждый пользователь взаимодейтсвует с системой 60 раз в день.
read / write = 40 / 20

##### Ожидаемое среднее RPS за день
RPS.total = DAU * 60 / 86 400 = 20 833 334 = 21k RPS
RPS.read = RPS.total * 40 / 60 = 13 888 888 = 14k RPS
RPS.write = RPS.total * 20 / 60 = 6 944 444 = 7k RPS
##### Геораспределенность
РФ
##### Сезонность
Праздничные дни
Вопрос: на какой процент ожидается повышение от среднего RPS?

##### Storage
- retention policy: вечно

##### Consistency
- В большинстве случаев eventual

##### Критичность
- лента - critical
- написание постов - non-critical
##### Устройства
- mobile 
- desktop (web?)


# Milestones

## MVP v1.0

На этапе MVP проект будет реализовывать следующий функционал в рамках десктопного веб-приложения (функционал приближен к раннему телеграму):
- Регистрация-аутентификация-авторизация
- Создание минимального профиля: bio, avatar
- Личные сообщения без редактирования
- Нотофикации о новых личных сообщениях в браузер
- Поиск людей по системе

Вопросы:
- какое количество пользователей ожидается на этом этапе?
##### API
```
/api/v1/auth
/api/v1/users/<id>
/api/v1/messages/<id>
/api/v1/search/users?q=<string>

SSE /api/v1/notifications
```


## v1.1 
#### Добавляем мобильное приложение и десктоп приложение -> резкое увеличение количества пользователей

- добавляем поддержку дестпоного приложения для mac, linux, windows
- добавляем поддержку мобильного клиента
- ожидаем резкое увеличение количества пользователей
Вопросы:
- какое количество пользователей ожидается на этом этапе?
##### API
```
?
```

## v1.2 
#### Добавляем посты, подписки, ленту
- создание постов
- подписки на людей
- редактирование сообщений в личной переписке
- нотификации о подпищиках
- лента и фильтрация-сортировка ленты
- поиск по ленте
Вопросы:
- какое количество пользователей ожидается на этом этапе?
##### API
```
/api/v1/posts
/api/v1/subscribe
PUT /api/v1/messages/<id>
? /api/v1/search/posts&q=<sting>
? /api/v1/search/feed&q=<sting>
/api/v1/feed&offset=<int>?limit=<int>&orderby=<orderbyType>&filter=<filterType>

SSE /api/v1/notifications (нотификации о подпищиках)
```
## v1.3 
#### Добавляем аналитику и quality of life
- добавляем аналитику для пользователей
##### API
```
/api/v1/analytics
```


# Существующие решения
Нет.

# Архитектура (С4)

[miro](https://miro.com/app/board/uXjVLlQFe6w=/)  
<br>
![](_attachments/Pasted%20image%2020250202125006.png)


